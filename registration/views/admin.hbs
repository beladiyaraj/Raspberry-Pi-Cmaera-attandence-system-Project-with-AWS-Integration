<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link href="images/gatexFavicon.png" rel="icon" />

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"
    ></script>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="/css/admin.css" />

    <script src="/js/filter.js"></script>
    <script src="/js/filterCSS.js"></script>

    <style>
      @import
      url('https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
    </style>
    <title>Admin</title>
  </head>

  <body>
    <section id="welcomSection" class="sections">
      <span class="section1">
        <span id="flexSpan">
          <div id="welcomeUsername">Welcome,
            <u>
              <h4 style="margin: 0;">{{useremail}}</h4>
            </u>
          </div>
          <div id="deviceIds" class="associatedIDs">
            Associated Device IDs:&nbsp;&nbsp;
            <u>
              <h3 style="margin: 0;">
                {{#each deviceIDsParsed}}
                  '{{this}}'
                {{/each}}
              </h3>
            </u>
          </div>
        </span>
        <div class="navigationButtons">
          <div class="dashboardButton">
            <a href="/dashboard" class="btn btn-primary2">Dashboard</a>
          </div>
          <div class="logoutButton">
            <a href="/logout" class="btn btn-danger">Logout</a>
          </div>
        </div>
      </span>
    </section>
    <section id="filterSection" class="sections">
      <h2>Filter Transactions:</h2>
      <form id="filterForm">

        <div class="input-box filter-group">
          <label class="input-label" for="Device_ID">Device ID:</label>
          <input
            type="text"
            id="Device_ID"
            name="Device_ID"
            class="input-1"
            onfocus="setFocus(true)"
            onblur="setFocus(false)"
          />
        </div>

        <div class="input-box filter-group">
          <label class="input-label" for="Batch_ID">Batch ID:</label>
          <input
            type="text"
            id="Batch_ID"
            name="Batch_ID"
            class="input-1"
            onfocus="setFocus(true)"
            onblur="setFocus(false)"
          />
        </div>

        <div class="input-box filter-group">
          <label class="input-label" for="Year">Year:</label>
          <input
            type="text"
            id="Year"
            name="Year"
            class="input-1"
            onfocus="setFocus(true)"
            onblur="setFocus(false)"
          />
        </div>

        <div class="input-box filter-group">
          <label class="input-label" for="Month">Month:</label>
          <input
            type="text"
            id="Month"
            name="Month"
            class="input-1"
            onfocus="setFocus(true)"
            onblur="setFocus(false)"
          />
        </div>

        <div class="input-box filter-group">
          <label class="input-label" for="Date">Date:</label>
          <input
            type="text"
            id="Date"
            name="Date"
            class="input-1"
            onfocus="setFocus(true)"
            onblur="setFocus(false)"
          />
        </div>

        <div class="input-box filter-group">
          <label class="input-label" for="Day">Day:</label>
          <input
            type="text"
            id="Day"
            name="Day"
            class="input-1"
            onfocus="setFocus(true)"
            onblur="setFocus(false)"
          />
        </div>

        <div class="input-box filter-group">
          <label class="input-label" for="Hours">Hours:</label>
          <input
            type="text"
            id="Hours"
            name="Hours"
            class="input-1"
            onfocus="setFocus(true)"
            onblur="setFocus(false)"
          />
        </div>

        <div class="input-box filter-group">
          <label class="input-label" for="Minutes">Minutes:</label>
          <input
            type="text"
            id="Minutes"
            name="Minutes"
            class="input-1"
            onfocus="setFocus(true)"
            onblur="setFocus(false)"
          />
        </div>

        <div class="input-box filter-group">
          <label class="input-label" for="Seconds">Seconds:</label>
          <input
            type="text"
            id="Seconds"
            name="Seconds"
            class="input-1"
            onfocus="setFocus(true)"
            onblur="setFocus(false)"
          />
        </div>

        <div class="input-box filter-group">
          <label class="input-label" for="Visitor_Details">Visitor Details:</label>
          <input
            type="text"
            id="Visitor_Details"
            name="Visitor_Details"
            class="input-1"
            onfocus="setFocus(true)"
            onblur="setFocus(false)"
          />
        </div>

        <div class="input-box filter-group">
          <label class="input-label" for="Vehicle_No">Vehicle No:</label>
          <input
            type="text"
            id="Vehicle_No"
            name="Vehicle_No"
            class="input-1"
            onfocus="setFocus(true)"
            onblur="setFocus(false)"
          />
        </div>
        <span id="submitButtonStyle">
          <div class="filter-group">
            <button type="submit" class="btn btn-primary1">Filter</button>
          </div>
        </span>
      </form>
    </section>

    <section id="transactionsSection" class="sections">
      <h2 id="tableName">Transactions:</h2>
      <div class="table-wrapper">
        <table class="fl-table" border="1" id="transactionsTable">
          <thead>
            <tr>
              <th>Device ID</th>
              <th>Batch ID</th>
              <th>Year</th>
              <th>Month</th>
              <th>Date</th>
              <th>Day</th>
              <th>Hours</th>
              <th>Minutes</th>
              <th>Seconds</th>
              <th>Visitor Details</th>
              <th>Vehicle No</th>
              <th>Visitor Image</th>
              <th>Extra 1</th>
              <th>Extra 2</th>
              <th>Extra 3</th>
              <th>Extra 4</th>
              <th>Extra 5</th>
            </tr>
          </thead>
          <tbody>
            {{#each transData}}
              <tr>
                <td>{{this.Device_ID}}</td>
                <td>{{this.batch_id}}</td>
                <td>{{this.year}}</td>
                <td>{{this.month}}</td>
                <td>{{this.date}}</td>
                <td>{{this.day}}</td>
                <td>{{this.hours}}</td>
                <td>{{this.minutes}}</td>
                <td>{{this.seconds}}</td>
                <td class="visitor_details">{{this.visitor_ID_Details}}</td>
                <td class="vehicle_no">{{this.vehicle_no}}</td>
                <td class="visitor_image">
                  {{#if this.visitor_image_thumbnail_data_url}}
                    <a
                      href="#"
                      data-toggle="modal"
                      data-target="#imageModal{{@index}}"
                    >
                      <img
                        src="{{this.visitor_image_thumbnail_data_url}}"
                        alt="Visitor Thumbnail"
                        class="thumbnail-circle"
                      />
                    </a>
                    <!-- Bootstrap Modal for Image -->
                    <div
                      class="modal fade"
                      id="imageModal{{@index}}"
                      tabindex="-1"
                      role="dialog"
                      aria-labelledby="exampleModalLabel"
                      aria-hidden="true"
                    >
                      <div
                        class="modal-dialog modal-dialog-centered modal-lg"
                        role="document"
                      >
                        <div class="modal-content">
                          <div class="modal-body">
                            <button
                              type="button"
                              class="close"
                              data-dismiss="modal"
                              aria-label="Close"
                            >
                              <span><svg
                                  id="closeModalBtn"
                                  xmlns="http://www.w3.org/2000/svg"
                                  height="1em"
                                  viewBox="0 0 384 512"
                                  style="fill: #000000; "
                                >
                                  <path
                                    d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"
                                  />
                                </svg>
                              </span>
                            </button>
                            <img
                              src="{{this.visitor_image_thumbnail_data_url}}"
                              alt="Visitor Thumbnail"
                              class="img-fluid full-window-image"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  {{else}}
                    No Image
                  {{/if}}
                </td>
                <td>{{this.extra_1}}</td>
                <td>{{this.extra_2}}</td>
                <td>{{this.extra_3}}</td>
                <td>{{this.extra_4}}</td>
                <td>{{this.extra_5}}</td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </section>

    <br />
    <br />
    <section id="locationDataSection" class="sections">
      <h2 id="locationDataTableName">Location Data:</h2>
      <div class="table-wrapper">
        <table class="fl-table" border="1">
          <thead>
            <tr>
              <th>Customer ID</th>
              <th>Device ID</th>
              <th>Location ID</th>
              <th>Country</th>
              <th>State</th>
              <th>District</th>
              <th>City</th>
              <th>Site</th>
              <th>Project Name</th>
              <th>Building Name</th>
              <th>Gate No</th>
              <th>Gate Name</th>
              <th>Extra 1</th>
              <th>Extra 2</th>
              <th>Extra 3</th>
              <th>Extra 4</th>
            </tr>
          </thead>
          <tbody>
            {{#if location}}
              <tr>
                <td>{{location.customer_ID}}</td>
                <td>{{deviceIDsParsed}}</td>
                <td>{{locationIDsParsed}}</td>
                <td>{{location.country}}</td>
                <td>{{location.state}}</td>
                <td>{{location.district}}</td>
                <td>{{location.city}}</td>
                <td>{{location.site}}</td>
                <td>{{location.project_name}}</td>
                <td>{{location.building_name}}</td>
                <td>{{location.gate_no}}</td>
                <td>{{location.gate_name}}</td>
                <td>{{location.extra_1}}</td>
                <td>{{location.extra_2}}</td>
                <td>{{location.extra_3}}</td>
                <td>{{location.extra_4}}</td>
              </tr>
            {{else}}
              <tr>
                <td colspan="16">No Location Data Found</td>
              </tr>
            {{/if}}
          </tbody>
        </table>
      </div>
    </section>
  </body>
</html>